# 새기능 #2077 네임스페이스 대시보드 개발

## 테스트

https://10.20.200.201:31313/cluster/c201/namespace/test2/overview 접속하여 확인

```bash
# http://jenkins.accordions.co.kr/job/accordion-client/job/feat%252Fnamespace-dashboard/
# 젠킨스에서 확인
# 또는
npm test
```

## 테스트 시나리오

```
Feature 네임스페이스 대시보드
	@Before
	Background
    Given 사용자가 로그인을 하고, 네임스페이스 대시보드에 접속한 상태
		TODO: And 프로메테우스 데이터 모킹 (CURL 및 인터페이스 모르는 상태로 모킹 X)
		And 앱 리소스 자원 모킹
		And 리소스 쿼터 자원 모킹

	Scenario 물리 리소스 조회
		When CPU 조회 엘리먼트 존재
		TODO: Then CPU 데이터가 API에서 보낸 값과 일치
		When Memory 조회 엘리먼트 존재
		TODO: Then Memory 데이터가 API에서 보낸 값과 일치
		When Network rx 조회 엘리먼트 존재
		TODO: Then Network rx 데이터가 API에서 보낸 값과 일치
		When Network tx 조회 엘리먼트 존재
		TODO: Then Network tx 데이터가 API에서 보낸 값과 일치
		When FileSystem 조회 엘리먼트 존재
		TODO: Then FileSystem 데이터가 API에서 보낸 값과 일치

	Scenario 앱 리소스 조회
		When 파드 정보 엘리먼트 존재
		Then 파드 정보 (개수, Running, Fail)을 API에서 보낸값과 일치
		When 볼륨 정보 엘리먼트 존재
		Then 볼륨 정보 (개수, Running, Fail)을 API에서 보낸값과 일치
		When 스테이트풀셋 정보 엘리먼트 존재
		Then 스테이트풀셋 정보 (개수, Ready)을 API에서 보낸값과 일치
		When 디플로이먼트 정보 엘리먼트 존재
		Then 디플로이먼트 정보 (개수, Ready)을 API에서 보낸값과 일치
		When 서비스 정보 엘리먼트 존재
		Then 서비스 정보 (개수)을 API에서 보낸값과 일치
		When 컨피그맵 정보 엘리먼트 존재
		Then 컨피그맵 정보 (개수)을 API에서 보낸값과 일치
		When 시크릿 정보 엘리먼트 존재
		Then 시크릿 정보 (개수)을 API에서 보낸값과 일치
	
	Scenario 앱 리소스 쿼터 조회
		When 리소스 쿼터 정보 엘리먼트 존재
		Then 리소스 쿼터 정보 API와 일치
```

-  `page-namespace-dashboard.test.ts` 참조



## UI

### width 1000px 이상

![image-20201112140651316](https://i.loli.net/2020/11/12/TKiVcXf2ZI8Eb7o.png)

### width 1000px이하

![image-20201112141152188](https://i.loli.net/2020/11/12/JaRPg2Y6UVAmcLB.png)



## 개발 전 Adobe Component 도입 가능한지 테스트

모든 컴포넌트를 혼자서 만들어 하기에 시간과 퀼리티를 보장하기 힘들다고 판단하여, 목표로 한 웹컴포넌트 라이브러리 중에서 adobe 컴포넌트 사용 환경 테스트 진행

- 웹팩 설정이 충돌
- 컴포넌트 스타일링을 위해 도입 결정
- 웹팩 설정 별도로 작성하여 도입

### 참고링크

- [adobe webpack 사이트 가이드](https://github.com/adobe/spectrum-web-components/blob/main/projects/example-project-webpack/webpack.config.js)

- [adobe webpack 실제 설정](https://github.com/adobe/spectrum-web-components/blob/main/documentation/webpack.config.js)



## 스토어 및 API

### /api

- pod.ts
- persistent
- statefulset.ts
- deployment.ts
- service.ts
- configmap.ts
- secret.ts
- resourcequota.ts

### /stores

- `store-namespace-dashboard.ts` 



## 사용자 마지막 Refresh Time 저장

- 현재는 로컬스토리지에 저장하여, url로 식별하여 마지막 refreshTime을 저장

- 이슈: refreshTime을 브라우저에 저장하기 때문에 사용자간 시간이 다른것은 아님



## Audit

